GLAVNA ----------------------------------------------------------------------------------------------------------------------

using System;
using System.Collections;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace DavidForma
{
    public partial class Form1 : Form
    {
        private List<string> korisnici = new List<string>();

        public Form1()
        {
            InitializeComponent();
            UpdateKorisniciCount();
        }

        private void button_unos_Click(object sender, EventArgs e)
        {
            Form2 unosForm = new Form2();
            if (unosForm.ShowDialog() == DialogResult.OK)
            {
                korisnici.Add(unosForm.Korisnik);
                UpdateKorisniciCount();
            }
        }

        private void button_ispis_Click(object sender, EventArgs e)
        {
            Form3 ispisForm = new Form3(korisnici);
            ispisForm.ShowDialog();
            UpdateKorisniciCount();
        }

        private void UpdateKorisniciCount()
        {
            label1.Text = $"Broj korisnika: {korisnici.Count}";
        }
    }
}




UNOS----------------------------------------------------------------------------------------------------------------------------------------------------------------------------




using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace DavidForma
{
    public partial class Form2 : Form
    {
        public string Korisnik { get; private set; }
        public Form2()
        {
            InitializeComponent();
        }

        private void Form2_Load(object sender, EventArgs e)
        {

        }

        private void button_ok_Click(object sender, EventArgs e)
        {
            if (!string.IsNullOrWhiteSpace(textBox_unos.Text))
            {
                Korisnik = textBox_unos.Text.Trim();
                this.DialogResult = DialogResult.OK;
            }
            else
            {
                MessageBox.Show("Unesite ime korisnika!");
            }
        }

        private void button_nok_Click(object sender, EventArgs e)
        {
            this.DialogResult = DialogResult.Cancel;
        }
    }
}



PRIKAZ KORISNIKA-----------------------------------------------------------------------------------------------------------------------------------------------

using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace DavidForma
{
    public partial class Form3 : Form
    {
        private List<string> korisnici;
        public Form3(List<string> korisnici)
        {
            InitializeComponent();
            this.korisnici = korisnici;
            UpdateList();
        }
        private void UpdateList()
        {
            listBox1.DataSource = null;
            listBox1.DataSource = new List<string>(korisnici);
        }
        private void Form3_Load(object sender, EventArgs e)
        {

        }

        private void button_close_Click(object sender, EventArgs e)
        {
            this.Close();
        }

        private void button_del_Click(object sender, EventArgs e)
        {
            if (listBox1.SelectedItem != null)
            {
                korisnici.Remove(listBox1.SelectedItem.ToString());
                UpdateList();
            }

        }
    }
}






















ZADATAK:
NAƒÜI NEKI PROBLEM I RIJE≈†ITI PROGRAMSKIM RJE≈†ENJEM (E DNEVNIK). Soba, Gost, Rezervacija
TREBA NAPRAVITI BAZU I KOMUNICIRATI S BAZOM, KORISTITI VI≈†E FORMA
SADR≈ΩAVATI KLASE, NASLJEƒêIVANJA, DELEGATE, DOGAƒêAJE
Kasnije Implementacija plaƒáanja ƒçlanarine


































Danas
Rekli ste
NAƒÜI NEKI PROBLEM I RIJE≈†ITI PROGRAMSKIM RJE≈†ENJEM (E DNEVNIK).
TREBA NAPRAVITI BAZU I KOMUNICIRATI S BAZOM, KORISTITI VI≈†E FORMA
SADR≈ΩAVATI KLASE, NASLJEƒêIVANJA, DELEGATE, DOGAƒêAJE

daj neki problem a da nije e dnevnik
Copilot ka≈æe
Super pitanje üëç. Ako tra≈æi≈° problem koji mo≈æe≈° rije≈°iti programskim rje≈°enjem (s bazom, vi≈°e formi, klasama, nasljeƒëivanjem, delegatima i dogaƒëajima), evo nekoliko ideja koje nisu vezane uz e-Dnevnik:

üí° Primjeri problema za rje≈°enje
1. Sustav za knji≈ænicu
Problem: Knji≈ænica mora pratiti knjige, ƒçlanove i posudbe.

Rje≈°enje:

Baza: tablice Knjige, ƒålanovi, Posudbe.

Vi≈°e formi: forma za unos knjiga, forma za unos ƒçlanova, forma za posudbu/vratiti knjigu.

Klase: Knjiga, ƒålan, Posudba.

Nasljeƒëivanje: Osoba ‚Üí ƒålan i Zaposlenik.

Delegati i dogaƒëaji: dogaƒëaj kada knjiga postane nedostupna (posuƒëena), obavijest korisniku.

2. Sustav za voƒëenje teretane
Problem: Teretana mora pratiti ƒçlanove, ƒçlanarine i termine treninga.

Rje≈°enje:

Baza: Clanovi, Treneri, Termini, Clanarine.

Vi≈°e formi: registracija ƒçlana, pregled termina, plaƒáanje ƒçlanarine.

Klase: Clan, Trener, Termin.

Nasljeƒëivanje: Osoba ‚Üí Clan, Trener.

Delegati/dogaƒëaji: dogaƒëaj kada ƒçlanu istekne ƒçlanarina ‚Üí obavijest.

3. Sustav za rezervaciju hotela
Problem: Hotel mora pratiti sobe, goste i rezervacije.

Rje≈°enje:

Baza: Sobe, Gosti, Rezervacije.

Vi≈°e formi: forma za unos soba, forma za rezervaciju, forma za pregled slobodnih soba.

Klase: Soba, Gost, Rezervacija.

Nasljeƒëivanje: Osoba ‚Üí Gost, Recepcionar.

Delegati/dogaƒëaji: dogaƒëaj kada se soba rezervira ‚Üí automatski mijenja status sobe.

4. Sustav za praƒáenje vozila (rent-a-car)
Problem: Rent-a-car mora pratiti vozila, klijente i najmove.

Rje≈°enje:

Baza: Vozila, Klijenti, Najmovi.

Vi≈°e formi: dodavanje vozila, registracija klijenta, najam vozila.

Klase: Vozilo, Klijent, Najam.

Nasljeƒëivanje: Vozilo ‚Üí Automobil, Kombi, Motocikl.

Delegati/dogaƒëaji: dogaƒëaj kada vozilo postane nedostupno ‚Üí obavijest recepcionaru.

üéØ Moj prijedlog
Najjednostavniji za implementaciju, a opet dovoljno slo≈æen da poka≈æe≈° bazu + forme + OOP + dogaƒëaje, je sustav za knji≈ænicu. Ima jasne entitete (knjige, ƒçlanovi, posudbe), prirodno nasljeƒëivanje (osoba ‚Üí ƒçlan/zaposlenik), i mo≈æe≈° lako dodati dogaƒëaje (npr. obavijest kad knjiga kasni).

≈Ωeli≈° da ti detaljno razradim knji≈ænicu kao projekt (struktura baze, klase, primjer dogaƒëaja/delegata), ili bi ti vi≈°e odgovarao neki od ostalih (teretana, hotel, rent-a-car)?





Uredi na stranici
Rekli ste
daj rezervaciju hotela
Copilot ka≈æe
Odliƒçno üëå, evo ti kompletno razraƒëen problem rezervacije hotela koji mo≈æe≈° implementirati kao projekt:

üè® Problem: Sustav za rezervaciju hotela
Hotel mora pratiti sobe, goste i rezervacije. Recepcionar unosi podatke o sobama i gostima, a sustav omoguƒáava rezervaciju i pregled slobodnih soba.

üìä Struktura baze podataka
Predla≈æem 3 glavne tablice:

Sobe

SobaID (PK)

BrojSobe

TipSobe (jednokrevetna, dvokrevetna, apartman)

CijenaPoNoci

Status (slobodna/zauzeta)

Gosti

GostID (PK)

Ime

Prezime

Email

Telefon

Rezervacije

RezervacijaID (PK)

GostID (FK)

SobaID (FK)

DatumDolaska

DatumOdlaska

UkupnaCijena

üñ•Ô∏è Vi≈°e formi
Forma za unos soba (dodavanje, ureƒëivanje, brisanje).

Forma za unos gostiju.

Forma za rezervaciju (odabir gosta + sobe + datuma).

Forma za pregled slobodnih soba.

üß© Klase
csharp


Kopiraj
public class Osoba
{
    public string Ime { get; set; }
    public string Prezime { get; set; }
}

public class Gost : Osoba
{
    public string Email { get; set; }
    public string Telefon { get; set; }
}

public class Soba
{
    public int SobaID { get; set; }
    public string TipSobe { get; set; }
    public decimal CijenaPoNoci { get; set; }
    public bool Slobodna { get; set; }
}

public class Rezervacija
{
    public int RezervacijaID { get; set; }
    public Gost Gost { get; set; }
    public Soba Soba { get; set; }
    public DateTime DatumDolaska { get; set; }
    public DateTime DatumOdlaska { get; set; }
}
üîÑ Nasljeƒëivanje
Osoba ‚Üí Gost, Recepcionar.

Mo≈æe≈° kasnije dodati i Administrator s posebnim ovlastima.

‚ö° Delegati i dogaƒëaji
Primjer dogaƒëaja: kada se soba rezervira, sustav automatski mijenja status sobe u zauzeta.

csharp


Kopiraj
public delegate void RezervacijaHandler(Soba soba);

public class Hotel
{
    public event RezervacijaHandler SobaRezervirana;

    public void RezervirajSobu(Soba soba)
    {
        soba.Slobodna = false;
        SobaRezervirana?.Invoke(soba);
    }
}
U glavnom programu mo≈æe≈° povezati dogaƒëaj s metodom koja ispisuje obavijest:

csharp


Kopiraj
hotel.SobaRezervirana += (soba) =>
{
    Console.WriteLine($"Soba {soba.SobaID} je upravo rezervirana!");
};
üéØ Za≈°to je ovo dobar projekt?
Ima bazu podataka (SQL).

Koristi vi≈°e formi.

Ima klase i nasljeƒëivanje.

Ukljuƒçuje delegat i dogaƒëaj.

Realan je i mo≈æe se pro≈°irivati (plaƒáanja, izvje≈°taji, korisniƒçke uloge).

Hoƒáe≈° da ti detaljno razradim SQL skriptu za kreiranje baze i C# kod za spajanje na bazu, da ima≈° odmah kostur projekta?





Uredi na stranici
Rekli ste
daj sql
Copilot ka≈æe
Evo ti kompletna SQL skripta za kreiranje baze podataka sustava za rezervaciju hotela üëá

sql


Kopiraj
-- Kreiranje baze
CREATE DATABASE HotelRezervacije;
USE HotelRezervacije;

-- Tablica za sobe
CREATE TABLE Sobe (
    SobaID INT PRIMARY KEY AUTO_INCREMENT,
    BrojSobe INT NOT NULL UNIQUE,
    TipSobe VARCHAR(50) NOT NULL,   -- jednokrevetna, dvokrevetna, apartman
    CijenaPoNoci DECIMAL(10,2) NOT NULL,
    Status VARCHAR(20) DEFAULT 'slobodna'  -- slobodna / zauzeta
);

-- Tablica za goste
CREATE TABLE Gosti (
    GostID INT PRIMARY KEY AUTO_INCREMENT,
    Ime VARCHAR(50) NOT NULL,
    Prezime VARCHAR(50) NOT NULL,
    Email VARCHAR(100),
    Telefon VARCHAR(20)
);

-- Tablica za rezervacije
CREATE TABLE Rezervacije (
    RezervacijaID INT PRIMARY KEY AUTO_INCREMENT,
    GostID INT NOT NULL,
    SobaID INT NOT NULL,
    DatumDolaska DATE NOT NULL,
    DatumOdlaska DATE NOT NULL,
    UkupnaCijena DECIMAL(10,2) NOT NULL,
    FOREIGN KEY (GostID) REFERENCES Gosti(GostID),
    FOREIGN KEY (SobaID) REFERENCES Sobe(SobaID)
);

-- Primjer unosa soba
INSERT INTO Sobe (BrojSobe, TipSobe, CijenaPoNoci, Status)
VALUES 
(101, 'Jednokrevetna', 50.00, 'slobodna'),
(102, 'Dvokrevetna', 80.00, 'slobodna'),
(201, 'Apartman', 120.00, 'slobodna');

-- Primjer unosa gosta
INSERT INTO Gosti (Ime, Prezime, Email, Telefon)
VALUES 
('Marko', 'Horvat', 'marko.hor




Uredi na stranici
Rekli ste
za mssms
Copilot ka≈æe
Super, idemo toƒçno za Microsoft SQL Server Management Studio (SSMS) üë®‚Äçüíª.
Evo ti SQL skripta za kreiranje baze podataka za sustav rezervacije hotela:

üè® SQL skripta (SSMS)
sql


Kopiraj
-- Kreiranje baze
CREATE DATABASE HotelRezervacije;
GO

USE HotelRezervacije;
GO

-- Tablica Sobe
CREATE TABLE Sobe (
    SobaID INT IDENTITY(1,1) PRIMARY KEY,
    BrojSobe INT NOT NULL UNIQUE,
    TipSobe NVARCHAR(50) NOT NULL,
    CijenaPoNoci DECIMAL(10,2) NOT NULL,
    Status NVARCHAR(20) DEFAULT 'Slobodna' -- Slobodna / Zauzeta
);

-- Tablica Gosti
CREATE TABLE Gosti (
    GostID INT IDENTITY(1,1) PRIMARY KEY,
    Ime NVARCHAR(50) NOT NULL,
    Prezime NVARCHAR(50) NOT NULL,
    Email NVARCHAR(100),
    Telefon NVARCHAR(20)
);

-- Tablica Rezervacije
CREATE TABLE Rezervacije (
    RezervacijaID INT IDENTITY(1,1) PRIMARY KEY,
    GostID INT NOT NULL,
    SobaID INT NOT NULL,
    DatumDolaska DATE NOT NULL,
    DatumOdlaska DATE NOT NULL,
    UkupnaCijena DECIMAL(10,2) NOT NULL,
    FOREIGN KEY (GostID) REFERENCES Gosti(GostID),
    FOREIGN KEY (SobaID) REFERENCES Sobe(SobaID)
);
üì• Primjer unosa podataka
sql


Kopiraj
-- Dodavanje soba
INSERT INTO Sobe (BrojSobe, TipSobe, CijenaPoNoci)
VALUES (101, 'Jednokrevetna', 50.00),
       (102, 'Dvokrevetna', 80.00),
       (201, 'Apartman', 150.00);

-- Dodavanje gosta
INSERT INTO Gosti (Ime, Prezime, Email, Telefon)
VALUES ('Marko', 'Horvat', 'marko.horvat@email.com', '091234567');

-- Rezervacija sobe
INSERT INTO Rezervacije (GostID, SobaID, DatumDolaska, DatumOdlaska, UkupnaCijena)
VALUES (1, 2, '2025-12-10', '2025-12-15', 80.00 * 5);

-- A≈æuriranje statusa sobe na zauzeta
UPDATE Sobe
SET Status = 'Zauzeta'
WHERE SobaID = 2;
üîç Primjer upita
sql


Kopiraj
-- Pregled slobodnih soba
SELECT * FROM Sobe WHERE Status = 'Slobodna';

-- Pregled rezervacija s gostima
SELECT r.RezervacijaID, g.Ime, g.Prezime, s.BrojSobe, r.DatumDolaska, r.DatumOdlaska, r.UkupnaCijena
FROM Rezervacije r
JOIN Gosti g ON r.GostID = g.GostID
JOIN Sobe s ON r.SobaID = s.SobaID;
üéØ ≈†to dalje u C# aplikaciji
Pove≈æe≈° se na ovu bazu preko ADO.NET ili Entity Framework.

Napravi≈° forme:

Forma za dodavanje soba

Forma za dodavanje gostiju

Forma za rezervaciju

Forma za pregled slobodnih soba

Dodaj delegat/dogaƒëaj: kad se soba rezervira, event mijenja status sobe i ≈°alje obavijest.

≈Ωeli≈° da ti poka≈æem i C# kod za spajanje na ovu bazu (ADO.NET primjer), da odmah ima≈° kostur aplikacije?





Uredi na stranici
Rekli ste
ako je baza KNJIZNICA
Copilot ka≈æe
Odliƒçno, ako je baza KNJIZNICA, evo ti kompletna struktura i SQL skripta za Microsoft SQL Server Management Studio (SSMS):

üìö Struktura baze KNJIZNICA
Knjige

KnjigaID (PK)

Naslov

Autor

GodinaIzdavanja

ISBN

Status (Dostupna / Posuƒëena)

Clanovi

ClanID (PK)

Ime

Prezime

Email

Telefon

DatumUclanjenja

Posudbe

PosudbaID (PK)

ClanID (FK)

KnjigaID (FK)

DatumPosudbe

DatumPovratka

Vracena (bit: 0/1)

üñ•Ô∏è SQL skripta (SSMS)
sql


Kopiraj
-- Kreiranje baze
CREATE DATABASE Knjiznica;
GO

USE Knjiznica;
GO

-- Tablica Knjige
CREATE TABLE Knjige (
    KnjigaID INT IDENTITY(1,1) PRIMARY KEY,
    Naslov NVARCHAR(100) NOT NULL,
    Autor NVARCHAR(100) NOT NULL,
    GodinaIzdavanja INT,
    ISBN NVARCHAR(20) UNIQUE,
    Status NVARCHAR(20) DEFAULT 'Dostupna' -- Dostupna / Posuƒëena
);

-- Tablica Clanovi
CREATE TABLE Clanovi (
    ClanID INT IDENTITY(1,1) PRIMARY KEY,
    Ime NVARCHAR(50) NOT NULL,
    Prezime NVARCHAR(50) NOT NULL,
    Email NVARCHAR(100),
    Telefon NVARCHAR(20),
    DatumUclanjenja DATE DEFAULT GETDATE()
);

-- Tablica Posudbe
CREATE TABLE Posudbe (
    PosudbaID INT IDENTITY(1,1) PRIMARY KEY,
    ClanID INT NOT NULL,
    KnjigaID INT NOT NULL,
    DatumPosudbe DATE NOT NULL,
    DatumPovratka DATE,
    Vracena BIT DEFAULT 0,
    FOREIGN KEY (ClanID) REFERENCES Clanovi(ClanID),
    FOREIGN KEY (KnjigaID) REFERENCES Knjige(KnjigaID)
);
üì• Primjer unosa podataka
sql


Kopiraj
-- Dodavanje knjiga
INSERT INTO Knjige (Naslov, Autor, GodinaIzdavanja, ISBN)
VALUES ('Na Drini ƒáuprija', 'Ivo Andriƒá', 1945, '978-953-1234567'),
       ('Povratak Filipa Latinovicza', 'Miroslav Krle≈æa', 1932, '978-953-7654321');

-- Dodavanje ƒçlana
INSERT INTO Clanovi (Ime, Prezime, Email, Telefon)
VALUES ('Ana', 'Kovaƒç', 'ana.kovac@email.com', '091234567');

-- Posudba knjige
INSERT INTO Posudbe (ClanID, KnjigaID, DatumPosudbe)
VALUES (1, 2, GETDATE());

-- A≈æuriranje statusa knjige na posuƒëena
UPDATE Knjige
SET Status = 'Posuƒëena'
WHERE KnjigaID = 2;
üîç Primjer upita
sql


Kopiraj
-- Pregled dostupnih knjiga
SELECT * FROM Knjige WHERE Status = 'Dostupna';

-- Pregled posudbi s ƒçlanovima
SELECT p.PosudbaID, c.Ime, c.Prezime, k.Naslov, p.DatumPosudbe, p.DatumPovratka, p.Vracena
FROM Posudbe p
JOIN Clanovi c ON p.ClanID = c.ClanID
JOIN Knjige k ON p.KnjigaID = k.KnjigaID;
üéØ Za aplikaciju (C# WinForms/WPF)
Forme:

Dodavanje knjiga

Dodavanje ƒçlanova

Posudba knjiga

Pregled dostupnih knjiga

Klase:

Osoba ‚Üí Clan, Zaposlenik

Knjiga

Posudba

Delegati/dogaƒëaji:

Dogaƒëaj kada knjiga postane posuƒëena ‚Üí obavijest korisniku.

Dogaƒëaj kada knjiga kasni s povratkom ‚Üí upozorenje.

≈Ωeli≈° da ti odmah dam i C# primjer koda za spajanje na ovu bazu (ADO.NET), da ima≈° kostur aplikacije za KNJIZNICA?





Uredi na stranici
Rekli ste
daj kod za glavnu formu
Copilot ka≈æe
Jasno üëç. Evo ti primjer C# WinForms glavne forme za aplikaciju KNJI≈ΩNICA koja se spaja na SQL Server bazu i omoguƒáava osnovne operacije (pregled knjiga, ƒçlanova i posudbi).

üñ•Ô∏è Primjer koda za glavnu formu (MainForm.cs)
csharp


Kopiraj
using System;
using System.Data;
using System.Data.SqlClient;
using System.Windows.Forms;

namespace KnjiznicaApp
{
    public partial class MainForm : Form
    {
        // Connection string prema tvojoj bazi (prilagodi prema svom SQL Serveru!)
        private string connectionString = 
            "Server=localhost;Database=Knjiznica;Trusted_Connection=True;";

        public MainForm()
        {
            InitializeComponent();
        }

        private void MainForm_Load(object sender, EventArgs e)
        {
            LoadKnjige();
            LoadClanovi();
            LoadPosudbe();
        }

        // üîπ Uƒçitavanje knjiga
        private void LoadKnjige()
        {
            using (SqlConnection conn = new SqlConnection(connectionString))
            {
                SqlDataAdapter da = new SqlDataAdapter("SELECT * FROM Knjige", conn);
                DataTable dt = new DataTable();
                da.Fill(dt);
                dgvKnjige.DataSource = dt; // dgvKnjige = DataGridView na formi
            }
        }

        // üîπ Uƒçitavanje ƒçlanova
        private void LoadClanovi()
        {
            using (SqlConnection conn = new SqlConnection(connectionString))
            {
                SqlDataAdapter da = new SqlDataAdapter("SELECT * FROM Clanovi", conn);
                DataTable dt = new DataTable();
                da.Fill(dt);
                dgvClanovi.DataSource = dt; // dgvClanovi = DataGridView na formi
            }
        }

        // üîπ Uƒçitavanje posudbi
        private void LoadPosudbe()
        {
            using (SqlConnection conn = new SqlConnection(connectionString))
            {
                string query = @"SELECT p.PosudbaID, c.Ime, c.Prezime, k.Naslov, 
                                        p.DatumPosudbe, p.DatumPovratka, p.Vracena
                                 FROM Posudbe p
                                 JOIN Clanovi c ON p.ClanID = c.ClanID
                                 JOIN Knjige k ON p.KnjigaID = k.KnjigaID";

                SqlDataAdapter da = new SqlDataAdapter(query, conn);
                DataTable dt = new DataTable();
                da.Fill(dt);
                dgvPosudbe.DataSource = dt; // dgvPosudbe = DataGridView na formi
            }
        }

        // üîπ Dodavanje nove knjige (primjer gumba)
        private void btnDodajKnjigu_Click(object sender, EventArgs e)
        {
            using (SqlConnection conn = new SqlConnection(connectionString))
            {
                string query = "INSERT INTO Knjige (Naslov, Autor, GodinaIzdavanja, ISBN) " +
                               "VALUES (@Naslov, @Autor, @Godina, @ISBN)";

                SqlCommand cmd = new SqlCommand(query, conn);
                cmd.Parameters.AddWithValue("@Naslov", txtNaslov.Text);
                cmd.Parameters.AddWithValue("@Autor", txtAutor.Text);
                cmd.Parameters.AddWithValue("@Godina", int.Parse(txtGodina.Text));
                cmd.Parameters.AddWithValue("@ISBN", txtISBN.Text);

                conn.Open();
                cmd.ExecuteNonQuery();
                conn.Close();

                MessageBox.Show("Knjiga dodana!");
                LoadKnjige();
            }
        }
    }
}
üìã ≈†to se nalazi na formi
Tri DataGridView kontrole: dgvKnjige, dgvClanovi, dgvPosudbe

TextBox kontrole: txtNaslov, txtAutor, txtGodina, txtISBN

Button: btnDodajKnjigu

‚ö° Kako radi
Na Load forme uƒçitava sve podatke iz tablica.

Ima metodu za dodavanje nove knjige.

Mo≈æe≈° pro≈°iriti sliƒçnim metodama za dodavanje ƒçlanova i posudbi.

Delegati/dogaƒëaji se mogu dodati npr. da se pokrene event kad se knjiga posudi (update statusa).

≈Ωeli≈° da ti dam i primjer dogaƒëaja/delegata u glavnoj formi (npr. event koji se aktivira kad se knjiga posudi)?





Uredi na stranici
Rekli ste
ne daj za dodavanje knjige ƒáe biti nova forma. Za ≈°to mi sve trebaju nove forme
Copilot ka≈æe
Odliƒçno razmi≈°ljanje üëå ‚Äì ako ≈æeli≈° da dodavanje knjige ide preko posebne forme, onda je logiƒçno da i druge kljuƒçne funkcionalnosti budu odvojene u svoje forme. To ti daje preglednost i modularnost aplikacije. Evo ≈°to bi sve imalo smisla imati kao nove forme u projektu KNJI≈ΩNICA:

üìë Preporuƒçene nove forme
1. Forma za dodavanje knjiga
Polja: Naslov, Autor, Godina, ISBN, Status.

Gumb Spremi ‚Üí upis u tablicu Knjige.

2. Forma za dodavanje ƒçlanova
Polja: Ime, Prezime, Email, Telefon.

Gumb Spremi ‚Üí upis u tablicu Clanovi.

3. Forma za posudbu knjiga
Padajuƒái izbornik za odabir ƒçlana.

Padajuƒái izbornik za odabir knjige (samo dostupne).

Polja: Datum posudbe, Datum povratka.

Gumb Posudi ‚Üí upis u tablicu Posudbe + update statusa knjige na Posuƒëena.

4. Forma za povrat knjige
Pregled aktivnih posudbi.

Odabir posudbe ‚Üí gumb Vrati.

Update: Vracena = 1 + status knjige vraƒáen na Dostupna.

5. Forma za pregled slobodnih knjiga
DataGridView s filtriranjem po autoru, naslovu, godini.

Samo knjige gdje je Status = 'Dostupna'.

6. Forma za izvje≈°taje / statistiku (opcionalno)
Pregled koliko je knjiga posuƒëeno.

Pregled najaktivnijih ƒçlanova.

Pregled knjiga koje kasne s povratkom.

üéØ Za≈°to vi≈°e formi?
Modularnost ‚Äì svaka forma ima svoju logiku i lak≈°e se odr≈æava.

Preglednost ‚Äì korisnik odmah zna gdje ≈°to radi (unos knjiga ‚â† posudba).

OOP princip ‚Äì mo≈æe≈° povezati forme s klasama (Knjiga, Clan, Posudba).

Delegati/dogaƒëaji ‚Äì npr. forma za posudbu mo≈æe emitirati dogaƒëaj KnjigaPosuƒëena, a glavna forma reagira i osvje≈æava prikaz.

üëâ Dakle, minimalno ti trebaju 4 nove forme:

Dodavanje knjiga

Dodavanje ƒçlanova

Posudba knjiga

Povrat knjiga

A mo≈æe≈° dodati jo≈° pregled slobodnih knjiga i izvje≈°taje ako ≈æeli≈° da projekt bude bogatiji.

Hoƒáe≈° da ti dam kostur koda za jednu od tih formi (npr. Dodavanje ƒçlana) da vidi≈° kako izgleda povezivanje s bazom?





Uredi na stranici
Rekli ste
i sad prema tome napi≈°i ponovno poƒçetnu formu
Copilot ka≈æe
Odliƒçno, sad kad smo definirali da ƒáe dodavanje knjiga, ƒçlanova, posudbi i povrat knjiga iƒái preko posebnih formi, poƒçetna forma (MainForm) treba biti centralno mjesto za navigaciju i pregled podataka. Dakle, ona ne radi unos, nego prikazuje stanje i otvara druge forme.

üñ•Ô∏è Primjer poƒçetne forme (MainForm.cs)
csharp


Kopiraj
using System;
using System.Data;
using System.Data.SqlClient;
using System.Windows.Forms;

namespace KnjiznicaApp
{
    public partial class MainForm : Form
    {
        private string connectionString =
            "Server=localhost;Database=Knjiznica;Trusted_Connection=True;";

        public MainForm()
        {
            InitializeComponent();
        }

        private void MainForm_Load(object sender, EventArgs e)
        {
            LoadKnjige();
            LoadClanovi();
            LoadPosudbe();
        }

        // üîπ Pregled knjiga
        private void LoadKnjige()
        {
            using (SqlConnection conn = new SqlConnection(connectionString))
            {
                SqlDataAdapter da = new SqlDataAdapter("SELECT * FROM Knjige", conn);
                DataTable dt = new DataTable();
                da.Fill(dt);
                dgvKnjige.DataSource = dt; // DataGridView na formi
            }
        }

        // üîπ Pregled ƒçlanova
        private void LoadClanovi()
        {
            using (SqlConnection conn = new SqlConnection(connectionString))
            {
                SqlDataAdapter da = new SqlDataAdapter("SELECT * FROM Clanovi", conn);
                DataTable dt = new DataTable();
                da.Fill(dt);
                dgvClanovi.DataSource = dt;
            }
        }

        // üîπ Pregled posudbi
        private void LoadPosudbe()
        {
            using (SqlConnection conn = new SqlConnection(connectionString))
            {
                string query = @"SELECT p.PosudbaID, c.Ime, c.Prezime, k.Naslov, 
                                        p.DatumPosudbe, p.DatumPovratka, p.Vracena
                                 FROM Posudbe p
                                 JOIN Clanovi c ON p.ClanID = c.ClanID
                                 JOIN Knjige k ON p.KnjigaID = k.KnjigaID";

                SqlDataAdapter da = new SqlDataAdapter(query, conn);
                DataTable dt = new DataTable();
                da.Fill(dt);
                dgvPosudbe.DataSource = dt;
            }
        }

        // üîπ Otvaranje forme za dodavanje knjige
        private void btnDodajKnjigu_Click(object sender, EventArgs e)
        {
            var form = new DodajKnjiguForm();
            form.ShowDialog();
            LoadKnjige(); // osvje≈æi prikaz nakon dodavanja
        }

        // üîπ Otvaranje forme za dodavanje ƒçlana
        private void btnDodajClana_Click(object sender, EventArgs e)
        {
            var form = new DodajClanaForm();
            form.ShowDialog();
            LoadClanovi();
        }

        // üîπ Otvaranje forme za posudbu knjige
        private void btnPosudiKnjigu_Click(object sender, EventArgs e)
        {
            var form = new PosudbaForm();
            form.ShowDialog();
            LoadPosudbe();
            LoadKnjige(); // jer se status knjige mijenja
        }

        // üîπ Otvaranje forme za povrat knjige
        private void btnVratiKnjigu_Click(object sender, EventArgs e)
        {
            var form = new PovratForm();
            form.ShowDialog();
            LoadPosudbe();
            LoadKnjige();
        }
    }
}
üìã ≈†to se nalazi na poƒçetnoj formi
Tri DataGridView kontrole:

dgvKnjige ‚Üí pregled svih knjiga

dgvClanovi ‚Üí pregled svih ƒçlanova

dgvPosudbe ‚Üí pregled svih posudbi

Navigacijski gumbi:

btnDodajKnjigu ‚Üí otvara formu za unos knjige

btnDodajClana ‚Üí otvara formu za unos ƒçlana

btnPosudiKnjigu ‚Üí otvara formu za posudbu

btnVratiKnjigu ‚Üí otvara formu za povrat

üéØ Logika
Poƒçetna forma je dashboard: prikazuje stanje baze.

Unosi i izmjene se rade u posebnim formama.

Nakon zatvaranja tih formi, poƒçetna forma se osvje≈æava da prika≈æe nove podatke.

≈Ωeli≈° da ti napi≈°em i kostur koda za formu DodajKnjiguForm, da vidi≈° kako izgleda unos u bazu preko posebne forme?





Uredi na stranici
Rekli ste
ne bi umjesto gumba bilo bolje staviti contextmenustrip
Copilot ka≈æe
To je jako dobra ideja üëç.
Umjesto da zatrpa≈° poƒçetnu formu s puno gumba, mo≈æe≈° koristiti ContextMenuStrip (desni klik meni) ili ƒçak MenuStrip (glavni meni na vrhu). To daje aplikaciji profesionalniji izgled i lak≈°u navigaciju.

üéØ Prednosti ContextMenuStrip-a
ƒåist UI ‚Äì nema hrpe gumba na formi.

Brza navigacija ‚Äì korisnik desnim klikom odmah dobiva opcije.

Modularnost ‚Äì lako dodaje≈° nove stavke bez mijenjanja dizajna forme.

Integracija ‚Äì mo≈æe≈° vezati meni na DataGridView (npr. desni klik na knjigu ‚Üí Posudi, Vrati, Obri≈°i).

üñ•Ô∏è Primjer koda za poƒçetnu formu s ContextMenuStrip
csharp


Kopiraj
using System;
using System.Data;
using System.Data.SqlClient;
using System.Windows.Forms;

namespace KnjiznicaApp
{
    public partial class MainForm : Form
    {
        private string connectionString =
            "Server=localhost;Database=Knjiznica;Trusted_Connection=True;";

        public MainForm()
        {
            InitializeComponent();

            // Kreiraj context menu
            ContextMenuStrip cms = new ContextMenuStrip();
            cms.Items.Add("Dodaj knjigu", null, DodajKnjigu_Click);
            cms.Items.Add("Dodaj ƒçlana", null, DodajClana_Click);
            cms.Items.Add("Posudi knjigu", null, PosudiKnjigu_Click);
            cms.Items.Add("Vrati knjigu", null, VratiKnjigu_Click);

            // Ve≈æi meni na formu
            this.ContextMenuStrip = cms;
        }

        private void MainForm_Load(object sender, EventArgs e)
        {
            LoadKnjige();
            LoadClanovi();
            LoadPosudbe();
        }

        private void LoadKnjige()
        {
            using (SqlConnection conn = new SqlConnection(connectionString))
            {
                SqlDataAdapter da = new SqlDataAdapter("SELECT * FROM Knjige", conn);
                DataTable dt = new DataTable();
                da.Fill(dt);
                dgvKnjige.DataSource = dt;
            }
        }

        private void LoadClanovi()
        {
            using (SqlConnection conn = new SqlConnection(connectionString))
            {
                SqlDataAdapter da = new SqlDataAdapter("SELECT * FROM Clanovi", conn);
                DataTable dt = new DataTable();
                da.Fill(dt);
                dgvClanovi.DataSource = dt;
            }
        }

        private void LoadPosudbe()
        {
            using (SqlConnection conn = new SqlConnection(connectionString))
            {
                string query = @"SELECT p.PosudbaID, c.Ime, c.Prezime, k.Naslov, 
                                        p.DatumPosudbe, p.DatumPovratka, p.Vracena
                                 FROM Posudbe p
                                 JOIN Clanovi c ON p.ClanID = c.ClanID
                                 JOIN Knjige k ON p.KnjigaID = k.KnjigaID";

                SqlDataAdapter da = new SqlDataAdapter(query, conn);
                DataTable dt = new DataTable();
                da.Fill(dt);
                dgvPosudbe.DataSource = dt;
            }
        }

        // üîπ Event handleri za meni
        private void DodajKnjigu_Click(object sender, EventArgs e)
        {
            var form = new DodajKnjiguForm();
            form.ShowDialog();
            LoadKnjige();
        }

        private void DodajClana_Click(object sender, EventArgs e)
        {
            var form = new DodajClanaForm();
            form.ShowDialog();
            LoadClanovi();
        }

        private void PosudiKnjigu_Click(object sender, EventArgs e)
        {
            var form = new PosudbaForm();
            form.ShowDialog();
            LoadPosudbe();
            LoadKnjige();
        }

        private void VratiKnjigu_Click(object sender, EventArgs e)
        {
            var form = new PovratForm();
            form.ShowDialog();
            LoadPosudbe();
            LoadKnjige();
        }
    }
}
üìã Kako to radi
Desni klik na formu ‚Üí otvara se meni s opcijama.

Svaka opcija otvara novu formu (unos knjige, ƒçlana, posudba, povrat).

Nakon zatvaranja forme, poƒçetna forma se osvje≈æava.

üëâ Ako ≈æeli≈° jo≈° bolje iskustvo, mo≈æe≈° staviti MenuStrip na vrh forme (File, Edit, Pregled, itd.), a ContextMenuStrip koristiti samo na DataGridView-u (npr. desni klik na knjigu ‚Üí Posudi ili Obri≈°i).

Hoƒáe≈° da ti poka≈æem primjer kako bi izgledao ContextMenuStrip vezan na DataGridView za knjige (npr. desni klik na red ‚Üí Posudi, Vrati)?





Uredi na stranici
Rekli ste
imat ƒáu 3 glavna dijela ContextMenuStripa. Knjige, ƒålanovi, Statistika. U Knjige: Posudi Knjigu, Povrat Knjige, Pregledaj Knjige, Dodaj Knjigu, Uredi Knjigu, Izbri≈°i Knjigu. U ƒålanovi: Pregled ƒçlanova, dodaj ƒçlan, izbri≈°i ƒçlan, uredi ƒçlan i Statistika ni≈°ta osim toga
Copilot ka≈æe
Savr≈°eno üëå ‚Äì toƒçno tako se radi dobra organizacija menija. Dakle, poƒçetna forma (MainForm) ƒáe imati ContextMenuStrip s tri glavna dijela: Knjige, ƒålanovi i Statistika. Svaki od njih ima svoje podstavke koje otvaraju odgovarajuƒáe forme ili pokreƒáu akcije.

üñ•Ô∏è Primjer koda za poƒçetnu formu s ovakvim ContextMenuStripom
csharp


Kopiraj
using System;
using System.Data;
using System.Data.SqlClient;
using System.Windows.Forms;

namespace KnjiznicaApp
{
    public partial class MainForm : Form
    {
        private string connectionString =
            "Server=localhost;Database=Knjiznica;Trusted_Connection=True;";

        public MainForm()
        {
            InitializeComponent();
            InitContextMenu();
        }

        private void MainForm_Load(object sender, EventArgs e)
        {
            LoadKnjige();
            LoadClanovi();
            LoadPosudbe();
        }

        // üîπ Kreiranje glavnog menija
        private void InitContextMenu()
        {
            ContextMenuStrip cms = new ContextMenuStrip();

            // --- KNJIGE ---
            ToolStripMenuItem knjigeMenu = new ToolStripMenuItem("Knjige");
            knjigeMenu.DropDownItems.Add("Posudi knjigu", null, PosudiKnjigu_Click);
            knjigeMenu.DropDownItems.Add("Povrat knjige", null, VratiKnjigu_Click);
            knjigeMenu.DropDownItems.Add("Pregledaj knjige", null, PregledajKnjige_Click);
            knjigeMenu.DropDownItems.Add("Dodaj knjigu", null, DodajKnjigu_Click);
            knjigeMenu.DropDownItems.Add("Uredi knjigu", null, UrediKnjigu_Click);
            knjigeMenu.DropDownItems.Add("Izbri≈°i knjigu", null, IzbrisiKnjigu_Click);

            // --- ƒåLANOVI ---
            ToolStripMenuItem clanoviMenu = new ToolStripMenuItem("ƒålanovi");
            clanoviMenu.DropDownItems.Add("Pregled ƒçlanova", null, PregledajClanove_Click);
            clanoviMenu.DropDownItems.Add("Dodaj ƒçlana", null, DodajClana_Click);
            clanoviMenu.DropDownItems.Add("Uredi ƒçlana", null, UrediClana_Click);
            clanoviMenu.DropDownItems.Add("Izbri≈°i ƒçlana", null, IzbrisiClana_Click);

            // --- STATISTIKA ---
            ToolStripMenuItem statistikaMenu = new ToolStripMenuItem("Statistika");
            // zasad prazno ‚Äì kasnije mo≈æe≈° dodati izvje≈°taje

            // Dodaj sve u meni
            cms.Items.Add(knjigeMenu);
            cms.Items.Add(clanoviMenu);
            cms.Items.Add(statistikaMenu);

            // Ve≈æi meni na formu
            this.ContextMenuStrip = cms;
        }

        // üîπ Metode za uƒçitavanje podataka
        private void LoadKnjige()
        {
            using (SqlConnection conn = new SqlConnection(connectionString))
            {
                SqlDataAdapter da = new SqlDataAdapter("SELECT * FROM Knjige", conn);
                DataTable dt = new DataTable();
                da.Fill(dt);
                dgvKnjige.DataSource = dt;
            }
        }

        private void LoadClanovi()
        {
            using (SqlConnection conn = new SqlConnection(connectionString))
            {
                SqlDataAdapter da = new SqlDataAdapter("SELECT * FROM Clanovi", conn);
                DataTable dt = new DataTable();
                da.Fill(dt);
                dgvClanovi.DataSource = dt;
            }
        }

        private void LoadPosudbe()
        {
            using (SqlConnection conn = new SqlConnection(connectionString))
            {
                string query = @"SELECT p.PosudbaID, c.Ime, c.Prezime, k.Naslov, 
                                        p.DatumPosudbe, p.DatumPovratka, p.Vracena
                                 FROM Posudbe p
                                 JOIN Clanovi c ON p.ClanID = c.ClanID
                                 JOIN Knjige k ON p.KnjigaID = k.KnjigaID";

                SqlDataAdapter da = new SqlDataAdapter(query, conn);
                DataTable dt = new DataTable();
                da.Fill(dt);
                dgvPosudbe.DataSource = dt;
            }
        }

        // üîπ Event handleri za KNJIGE
        private void PosudiKnjigu_Click(object sender, EventArgs e) => new PosudbaForm().ShowDialog();
        private void VratiKnjigu_Click(object sender, EventArgs e) => new PovratForm().ShowDialog();
        private void PregledajKnjige_Click(object sender, EventArgs e) => LoadKnjige();
        private void DodajKnjigu_Click(object sender, EventArgs e) => new DodajKnjiguForm().ShowDialog();
        private void UrediKnjigu_Click(object sender, EventArgs e) => new UrediKnjiguForm().ShowDialog();
        private void IzbrisiKnjigu_Click(object sender, EventArgs e) => new IzbrisiKnjiguForm().ShowDialog();

        // üîπ Event handleri za ƒåLANOVE
        private void PregledajClanove_Click(object sender, EventArgs e) => LoadClanovi();
        private void DodajClana_Click(object sender, EventArgs e) => new DodajClanaForm().ShowDialog();
        private void UrediClana_Click(object sender, EventArgs e) => new UrediClanaForm().ShowDialog();
        private void IzbrisiClana_Click(object sender, EventArgs e) => new IzbrisiClanaForm().ShowDialog();
    }
}
üìã Kako ƒáe izgledati
Desni klik na formu ‚Üí otvara se meni s Knjige, ƒålanovi, Statistika.

Svaka podstavka otvara novu formu ili izvr≈°ava akciju.

Pregled knjiga/ƒçlanova se radi direktno u glavnoj formi (refresh DataGridView).

Dodavanje, ureƒëivanje i brisanje se rade u posebnim formama.

üëâ Sljedeƒái korak je da napi≈°emo kostur jedne od tih formi (npr. DodajKnjiguForm) da vidi≈° kako izgleda unos u bazu. Hoƒáe≈° da krenemo s tim?





Uredi na stranici
Copilot ka≈æe
Odliƒçno, to je vrlo jasna struktura üëå. Evo ti kako mo≈æe izgledati poƒçetna forma s ContextMenuStripom koji ima tri glavna dijela (Knjige, ƒålanovi, Statistika) i sve podstavke koje si naveo:

üñ•Ô∏è Primjer koda (MainForm.cs)
csharp


Kopiraj
using System;
using System.Data;
using System.Data.SqlClient;
using System.Windows.Forms;

namespace KnjiznicaApp
{
    public partial class MainForm : Form
    {
        private string connectionString =
            "Server=localhost;Database=Knjiznica;Trusted_Connection=True;";

        public MainForm()
        {
            InitializeComponent();
            InitContextMenu();
        }

        private void MainForm_Load(object sender, EventArgs e)
        {
            LoadKnjige();
            LoadClanovi();
            LoadPosudbe();
        }

        // üîπ Kreiranje glavnog menija
        private void InitContextMenu()
        {
            ContextMenuStrip cms = new ContextMenuStrip();

            // --- KNJIGE ---
            ToolStripMenuItem knjigeMenu = new ToolStripMenuItem("Knjige");
            knjigeMenu.DropDownItems.Add("Posudi knjigu", null, PosudiKnjigu_Click);
            knjigeMenu.DropDownItems.Add("Povrat knjige", null, VratiKnjigu_Click);
            knjigeMenu.DropDownItems.Add("Pregledaj knjige", null, PregledajKnjige_Click);
            knjigeMenu.DropDownItems.Add("Dodaj knjigu", null, DodajKnjigu_Click);
            knjigeMenu.DropDownItems.Add("Uredi knjigu", null, UrediKnjigu_Click);
            knjigeMenu.DropDownItems.Add("Izbri≈°i knjigu", null, IzbrisiKnjigu_Click);

            // --- ƒåLANOVI ---
            ToolStripMenuItem clanoviMenu = new ToolStripMenuItem("ƒålanovi");
            clanoviMenu.DropDownItems.Add("Pregled ƒçlanova", null, PregledajClanove_Click);
            clanoviMenu.Drop




Uredi na stranici
Rekli ste
sada sam se odluƒçio za private void PosudiKnjigu_Click(object sender, EventArgs e) => new PosudbaKnjiga().ShowDialog();
private void VratiKnjigu_Click(object sender, EventArgs e) => new PovratKnjiga().ShowDialog();
private void PregledajKnjige_Click(object sender, EventArgs e) => new PregledKnjiga().ShowDialog();
private void DodajKnjigu_Click(object sender, EventArgs e) => new DodavanjeKnjiga().ShowDialog();
private void UrediKnjigu_Click(object sender, EventArgs e) => new UredivanjeKnjiga().ShowDialog();
private void IzbrisiKnjigu_Click(object sender, EventArgs e) => new BrisanjeKnjiga().ShowDialog();
private void PregledajClanove_Click(object sender, EventArgs e) => new PregledClanova().ShowDialog();
private void DodajClana_Click(object sender, EventArgs e) => new DodavanjeClanova().ShowDialog();
private void UrediClana_Click(object sender, EventArgs e) => new UredivanjeClanova().ShowDialog();
private void IzbrisiClana_Click(object sender, EventArgs e) => new BrisanjeClanova().ShowDialog();
Copilot ka≈æe
Odliƒçno üëå, to je jako ƒçista i pregledna organizacija!
Dakle, svaka akcija u ContextMenuStripu otvara svoju formu (ShowDialog()), a glavna forma ostaje centralni ‚Äúdashboard‚Äù.

üîπ Kako to izgleda u praksi
1. Glavna forma (MainForm)
Ima ContextMenuStrip s tri glavna menija:

Knjige (Posudi, Vrati, Pregledaj, Dodaj, Uredi, Izbri≈°i)

ƒålanovi (Pregledaj, Dodaj, Uredi, Izbri≈°i)

Statistika (zasad prazno, kasnije mo≈æe≈° dodati izvje≈°taje)

2. Event handleri
Ti si ih veƒá definirao ovako:

csharp


Kopiraj
private void PosudiKnjigu_Click(object sender, EventArgs e) => new PosudbaKnjiga().ShowDialog();
private void VratiKnjigu_Click(object sender, EventArgs e) => new PovratKnjiga().ShowDialog();
private void PregledajKnjige_Click(object sender, EventArgs e) => new PregledKnjiga().ShowDialog();
private void DodajKnjigu_Click(object sender, EventArgs e) => new DodavanjeKnjiga().ShowDialog();
private void UrediKnjigu_Click(object sender, EventArgs e) => new UredivanjeKnjiga().ShowDialog();
private void IzbrisiKnjigu_Click(object sender, EventArgs e) => new BrisanjeKnjiga().ShowDialog();

private void PregledajClanove_Click(object sender, EventArgs e) => new PregledClanova().ShowDialog();
private void DodajClana_Click(object sender, EventArgs e) => new DodavanjeClanova().ShowDialog();
private void UrediClana_Click(object sender, EventArgs e) => new UredivanjeClanova().ShowDialog();
private void IzbrisiClana_Click(object sender, EventArgs e) => new BrisanjeClanova().ShowDialog();
To je savr≈°eno jer svaka forma ima svoju logiku i ne optereƒáuje glavnu formu.

üîπ Kako povezati s ContextMenuStripom
U InitContextMenu() metodi u glavnoj formi samo pove≈æe≈° ove event handlere:

csharp


Kopiraj
private void InitContextMenu()
{
    ContextMenuStrip cms = new ContextMenuStrip();

    // --- KNJIGE ---
    ToolStripMenuItem knjigeMenu = new ToolStripMenuItem("Knjige");
    knjigeMenu.DropDownItems.Add("Posudi knjigu", null, PosudiKnjigu_Click);
    knjigeMenu.DropDownItems.Add("Povrat knjige", null, VratiKnjigu_Click);
    knjigeMenu.DropDownItems.Add("Pregledaj knjige", null, PregledajKnjige_Click);
    knjigeMenu.DropDownItems.Add("Dodaj knjigu", null, DodajKnjigu_Click);
    knjigeMenu.DropDownItems.Add("Uredi knjigu", null, UrediKnjigu_Click);
    knjigeMenu.DropDownItems.Add("Izbri≈°i knjigu", null, IzbrisiKnjigu_Click);

    // --- ƒåLANOVI ---
    ToolStripMenuItem clanoviMenu = new ToolStripMenuItem("ƒålanovi");
    clanoviMenu.DropDownItems.Add("Pregled ƒçlanova", null, PregledajClanove_Click);
    clanoviMenu.DropDownItems.Add("Dodaj ƒçlana", null, DodajClana_Click);
    clanoviMenu.DropDownItems.Add("Uredi ƒçlana", null, UrediClana_Click);
    clanoviMenu.DropDownItems.Add("Izbri≈°i ƒçlana", null, IzbrisiClana_Click);

    // --- STATISTIKA ---
    ToolStripMenuItem statistikaMenu = new ToolStripMenuItem("Statistika");
    // zasad prazno

    // Dodaj sve u meni
    cms.Items.Add(knjigeMenu);
    cms.Items.Add(clanoviMenu);
    cms.Items.Add(statistikaMenu);

    this.ContextMenuStrip = cms;
}
üéØ Rezultat
Glavna forma je ƒçista ‚Äì samo prikazuje podatke (DataGridView za knjige, ƒçlanove, posudbe).

Sve akcije (dodavanje, ureƒëivanje, brisanje, posudba, povrat) se rade u posebnim formama.

ContextMenuStrip je centralna navigacija.

üëâ Sljedeƒái logiƒçan korak je da napi≈°emo kostur jedne od tih formi (npr. DodavanjeKnjiga) ‚Äì da vidi≈° kako izgleda unos u bazu preko posebne forme. Hoƒáe≈° da krenemo s tim?





Uredi na stranici
Rekli ste
idemo na Dodavanje, Editiranje I Brisanje Knjgia
Copilot ka≈æe
Super, idemo toƒçno razraditi tri forme za rad s knjigama: Dodavanje, Ureƒëivanje i Brisanje. Svaka forma ima svoju logiku i povezuje se s bazom KNJIZNICA.

üìò 1. Dodavanje knjige (DodavanjeKnjiga.cs)
csharp


Kopiraj
using System;
using System.Data.SqlClient;
using System.Windows.Forms;

namespace KnjiznicaApp
{
    public partial class DodavanjeKnjiga : Form
    {
        private string connectionString = "Server=localhost;Database=Knjiznica;Trusted_Connection=True;";

        public DodavanjeKnjiga()
        {
            InitializeComponent();
        }

        private void btnSpremi_Click(object sender, EventArgs e)
        {
            using (SqlConnection conn = new SqlConnection(connectionString))
            {
                string query = "INSERT INTO Knjige (Naslov, Autor, GodinaIzdavanja, ISBN) " +
                               "VALUES (@Naslov, @Autor, @Godina, @ISBN)";

                SqlCommand cmd = new SqlCommand(query, conn);
                cmd.Parameters.AddWithValue("@Naslov", txtNaslov.Text);
                cmd.Parameters.AddWithValue("@Autor", txtAutor.Text);
                cmd.Parameters.AddWithValue("@Godina", int.Parse(txtGodina.Text));
                cmd.Parameters.AddWithValue("@ISBN", txtISBN.Text);

                conn.Open();
                cmd.ExecuteNonQuery();
                conn.Close();

                MessageBox.Show("Knjiga uspje≈°no dodana!");
                this.Close();
            }
        }
    }
}
üìó 2. Ureƒëivanje knjige (UredivanjeKnjiga.cs)
csharp


Kopiraj
using System;
using System.Data.SqlClient;
using System.Windows.Forms;

namespace KnjiznicaApp
{
    public partial class UredivanjeKnjiga : Form
    {
        private string connectionString = "Server=localhost;Database=Knjiznica;Trusted_Connection=True;";

        public UredivanjeKnjiga()
        {
            InitializeComponent();
        }

        private void btnSpremi_Click(object sender, EventArgs e)
        {
            using (SqlConnection conn = new SqlConnection(connectionString))
            {
                string query = "UPDATE Knjige SET Naslov=@Naslov, Autor=@Autor, GodinaIzdavanja=@Godina, ISBN=@ISBN " +
                               "WHERE KnjigaID=@KnjigaID";

                SqlCommand cmd = new SqlCommand(query, conn);
                cmd.Parameters.AddWithValue("@Naslov", txtNaslov.Text);
                cmd.Parameters.AddWithValue("@Autor", txtAutor.Text);
                cmd.Parameters.AddWithValue("@Godina", int.Parse(txtGodina.Text));
                cmd.Parameters.AddWithValue("@ISBN", txtISBN.Text);
                cmd.Parameters.AddWithValue("@KnjigaID", int.Parse(txtKnjigaID.Text));

                conn.Open();
                cmd.ExecuteNonQuery();
                conn.Close();

                MessageBox.Show("Knjiga uspje≈°no a≈æurirana!");
                this.Close();
            }
        }
    }
}
üìï 3. Brisanje knjige (BrisanjeKnjiga.cs)
csharp


Kopiraj
using System;
using System.Data.SqlClient;
using System.Windows.Forms;

namespace KnjiznicaApp
{
    public partial class BrisanjeKnjiga : Form
    {
        private string connectionString = "Server=localhost;Database=Knjiznica;Trusted_Connection=True;";

        public BrisanjeKnjiga()
        {
            InitializeComponent();
        }

        private void btnIzbrisi_Click(object sender, EventArgs e)
        {
            using (SqlConnection conn = new SqlConnection(connectionString))
            {
                string query = "DELETE FROM Knjige WHERE KnjigaID=@KnjigaID";

                SqlCommand cmd = new SqlCommand(query, conn);
                cmd.Parameters.AddWithValue("@KnjigaID", int.Parse(txtKnjigaID.Text));

                conn.Open();
                cmd.ExecuteNonQuery();
                conn.Close();

                MessageBox.Show("Knjiga uspje≈°no izbrisana!");
                this.Close();
            }
        }
    }
}
üìã ≈†to svaka forma ima
DodavanjeKnjiga ‚Üí TextBox za naslov, autora, godinu, ISBN + gumb Spremi.

UredivanjeKnjiga ‚Üí TextBox za ID knjige + polja za izmjenu podataka + gumb Spremi.

BrisanjeKnjiga ‚Üí TextBox za ID knjige + gumb Izbri≈°i.

üéØ Kako se povezuje s glavnom formom
U glavnoj formi (MainForm) veƒá ima≈° event handlere:

csharp


Kopiraj
private void DodajKnjigu_Click(object sender, EventArgs e) => new DodavanjeKnjiga().ShowDialog();
private void UrediKnjigu_Click(object sender, EventArgs e) => new UredivanjeKnjiga().ShowDialog();
private void IzbrisiKnjigu_Click(object sender, EventArgs e) => new BrisanjeKnjiga().ShowDialog();
Dakle, sve se otvara preko ContextMenuStripa.

üëâ Hoƒáe≈° da ti dam i PregledKnjiga formu (DataGridView s filtriranjem i pretragom), da zaokru≈æimo kompletan CRUD za knjige?





Uredi na stranici
Rekli ste
daj mi za ureƒëivanje i brisanje da ne moram ID knjige nego mogu kliknuti na npr DataGridViewu Koji ≈æelim urediti/izbrisati
Copilot ka≈æe
Odliƒçno razmi≈°ljanje üëå ‚Äì puno je praktiƒçnije da korisnik klikne na red u DataGridViewu i onda otvori formu za ureƒëivanje ili brisanje, umjesto da ruƒçno upisuje ID. To se radi tako da se izabere redak u DataGridView i proslijedi KnjigaID (ili cijeli objekt) u formu za ureƒëivanje/brisanje.

üîπ Glavna forma ‚Äì odabir retka iz DataGridView-a
Pretpostavimo da u glavnoj formi ima≈° dgvKnjige (DataGridView s knjigama).
Event handler za Uredi knjigu mo≈æe izgledati ovako:

csharp


Kopiraj
private void UrediKnjigu_Click(object sender, EventArgs e)
{
    if (dgvKnjige.CurrentRow != null)
    {
        int knjigaID = Convert.ToInt32(dgvKnjige.CurrentRow.Cells["KnjigaID"].Value);
        var form = new UredivanjeKnjiga(knjigaID);
        form.ShowDialog();
        LoadKnjige(); // osvje≈æi prikaz nakon ureƒëivanja
    }
}
Za Brisanje knjige:

csharp


Kopiraj
private void IzbrisiKnjigu_Click(object sender, EventArgs e)
{
    if (dgvKnjige.CurrentRow != null)
    {
        int knjigaID = Convert.ToInt32(dgvKnjige.CurrentRow.Cells["KnjigaID"].Value);
        var form = new BrisanjeKnjiga(knjigaID);
        form.ShowDialog();
        LoadKnjige(); // osvje≈æi prikaz nakon brisanja
    }
}
üîπ Forma za ureƒëivanje knjige (UredivanjeKnjiga.cs)
csharp


Kopiraj
using System;
using System.Data.SqlClient;
using System.Windows.Forms;

namespace KnjiznicaApp
{
    public partial class UredivanjeKnjiga : Form
    {
        private string connectionString = "Server=localhost;Database=Knjiznica;Trusted_Connection=True;";
        private int knjigaID;

        public UredivanjeKnjiga(int id)
        {
            InitializeComponent();
            knjigaID = id;
            LoadKnjiga();
        }

        private void LoadKnjiga()
        {
            using (SqlConnection conn = new SqlConnection(connectionString))
            {
                string query = "SELECT Naslov, Autor, GodinaIzdavanja, ISBN FROM Knjige WHERE KnjigaID=@ID";
                SqlCommand cmd = new SqlCommand(query, conn);
                cmd.Parameters.AddWithValue("@ID", knjigaID);

                conn.Open();
                SqlDataReader reader = cmd.ExecuteReader();
                if (reader.Read())
                {
                    txtNaslov.Text = reader["Naslov"].ToString();
                    txtAutor.Text = reader["Autor"].ToString();
                    txtGodina.Text = reader["GodinaIzdavanja"].ToString();
                    txtISBN.Text = reader["ISBN"].ToString();
                }
                conn.Close();
            }
        }

        private void btnSpremi_Click(object sender, EventArgs e)
        {
            using (SqlConnection conn = new SqlConnection(connectionString))
            {
                string query = "UPDATE Knjige SET Naslov=@Naslov, Autor=@Autor, GodinaIzdavanja=@Godina, ISBN=@ISBN WHERE KnjigaID=@ID";
                SqlCommand cmd = new SqlCommand(query, conn);
                cmd.Parameters.AddWithValue("@Naslov", txtNaslov.Text);
                cmd.Parameters.AddWithValue("@Autor", txtAutor.Text);
                cmd.Parameters.AddWithValue("@Godina", int.Parse(txtGodina.Text));
                cmd.Parameters.AddWithValue("@ISBN", txtISBN.Text);
                cmd.Parameters.AddWithValue("@ID", knjigaID);

                conn.Open();
                cmd.ExecuteNonQuery();
                conn.Close();

                MessageBox.Show("Knjiga uspje≈°no a≈æurirana!");
                this.Close();
            }
        }
    }
}
üîπ Forma za brisanje knjige (BrisanjeKnjiga.cs)
csharp


Kopiraj
using System;
using System.Data.SqlClient;
using System.Windows.Forms;

namespace KnjiznicaApp
{
    public partial class BrisanjeKnjiga : Form
    {
        private string connectionString = "Server=localhost;Database=Knjiznica;Trusted_Connection=True;";
        private int knjigaID;

        public BrisanjeKnjiga(int id)
        {
            InitializeComponent();
            knjigaID = id;
        }

        private void btnIzbrisi_Click(object sender, EventArgs e)
        {
            var confirm = MessageBox.Show("Jeste li sigurni da ≈æelite izbrisati ovu knjigu?", 
                                          "Potvrda brisanja", 
                                          MessageBoxButtons.YesNo);
            if (confirm == DialogResult.Yes)
            {
                using (SqlConnection conn = new SqlConnection(connectionString))
                {
                    string query = "DELETE FROM Knjige WHERE KnjigaID=@ID";
                    SqlCommand cmd = new SqlCommand(query, conn);
                    cmd.Parameters.AddWithValue("@ID", knjigaID);

                    conn.Open();
                    cmd.ExecuteNonQuery();
                    conn.Close();

                    MessageBox.Show("Knjiga uspje≈°no izbrisana!");
                    this.Close();
                }
            }
        }
    }
}
üéØ Rezultat
Korisnik klikne na red u DataGridViewu.

ContextMenuStrip opcija Uredi knjigu ili Izbri≈°i knjigu otvara formu s tim ID-om.

Forma automatski uƒçita podatke (za ureƒëivanje) ili samo tra≈æi potvrdu (za brisanje).

Nakon zatvaranja forme, glavna forma se osvje≈æi.

üëâ Hoƒáe≈° da ti dam i PregledKnjiga formu (DataGridView s filtriranjem i pretragom), da kompletiramo CRUD za knjige?





Uredi na stranici
Rekli ste
ne daj da korisnik bira knjigu tek kod ureƒëivanja/brisanja ne na poƒçetku
Copilot ka≈æe
Razumijem te üëç ‚Äì ≈æeli≈° da korisnik ne mora birati knjigu odmah na glavnoj formi, nego da tek kad otvori formu za ureƒëivanje ili brisanje tamo odabere knjigu koju ≈æeli mijenjati. To je elegantnije jer svaka forma ima svoju logiku i korisnik radi sve na jednom mjestu.

üîπ Kako to izgleda
1. Forma za ureƒëivanje knjige (UredivanjeKnjiga)
Na formi se nalazi DataGridView s popisom svih knjiga.

Korisnik klikne na red koji ≈æeli urediti.

Podaci se uƒçitaju u TextBoxove.

Nakon izmjene, klikne Spremi ‚Üí update u bazi.

csharp


Kopiraj
public partial class UredivanjeKnjiga : Form
{
    private string connectionString = "Server=localhost;Database=Knjiznica;Trusted_Connection=True;";
    private int knjigaID;

    public UredivanjeKnjiga()
    {
        InitializeComponent();
        LoadKnjige();
    }

    private void LoadKnjige()
    {
        using (SqlConnection conn = new SqlConnection(connectionString))
        {
            SqlDataAdapter da = new SqlDataAdapter("SELECT * FROM Knjige", conn);
            DataTable dt = new DataTable();
            da.Fill(dt);
            dgvKnjige.DataSource = dt;
        }
    }

    // Klik na red u DataGridViewu
    private void dgvKnjige_CellClick(object sender, DataGridViewCellEventArgs e)
    {
        if (e.RowIndex >= 0)
        {
            knjigaID = Convert.ToInt32(dgvKnjige.Rows[e.RowIndex].Cells["KnjigaID"].Value);
            txtNaslov.Text = dgvKnjige.Rows[e.RowIndex].Cells["Naslov"].Value.ToString();
            txtAutor.Text = dgvKnjige.Rows[e.RowIndex].Cells["Autor"].Value.ToString();
            txtGodina.Text = dgvKnjige.Rows[e.RowIndex].Cells["GodinaIzdavanja"].Value.ToString();
            txtISBN.Text = dgvKnjige.Rows[e.RowIndex].Cells["ISBN"].Value.ToString();
        }
    }

    private void btnSpremi_Click(object sender, EventArgs e)
    {
        using (SqlConnection conn = new SqlConnection(connectionString))
        {
            string query = "UPDATE Knjige SET Naslov=@Naslov, Autor=@Autor, GodinaIzdavanja=@Godina, ISBN=@ISBN WHERE KnjigaID=@ID";
            SqlCommand cmd = new SqlCommand(query, conn);
            cmd.Parameters.AddWithValue("@Naslov", txtNaslov.Text);
            cmd.Parameters.AddWithValue("@Autor", txtAutor.Text);
            cmd.Parameters.AddWithValue("@Godina", int.Parse(txtGodina.Text));
            cmd.Parameters.AddWithValue("@ISBN", txtISBN.Text);
            cmd.Parameters.AddWithValue("@ID", knjigaID);

            conn.Open();
            cmd.ExecuteNonQuery();
            conn.Close();

            MessageBox.Show("Knjiga uspje≈°no a≈æurirana!");
            LoadKnjige(); // osvje≈æi prikaz
        }
    }
}
2. Forma za brisanje knjige (BrisanjeKnjiga)
Na formi se nalazi DataGridView s popisom knjiga.

Korisnik klikne na red koji ≈æeli obrisati.

Klikne Izbri≈°i ‚Üí delete u bazi.

csharp


Kopiraj
public partial class BrisanjeKnjiga : Form
{
    private string connectionString = "Server=localhost;Database=Knjiznica;Trusted_Connection=True;";
    private int knjigaID;

    public BrisanjeKnjiga()
    {
        InitializeComponent();
        LoadKnjige();
    }

    private void LoadKnjige()
    {
        using (SqlConnection conn = new SqlConnection(connectionString))
        {
            SqlDataAdapter da = new SqlDataAdapter("SELECT * FROM Knjige", conn);
            DataTable dt = new DataTable();
            da.Fill(dt);
            dgvKnjige.DataSource = dt;
        }
    }

    private void dgvKnjige_CellClick(object sender, DataGridViewCellEventArgs e)
    {
        if (e.RowIndex >= 0)
        {
            knjigaID = Convert.ToInt32(dgvKnjige.Rows[e.RowIndex].Cells["KnjigaID"].Value);
        }
    }

    private void btnIzbrisi_Click(object sender, EventArgs e)
    {
        if (knjigaID > 0)
        {
            var confirm = MessageBox.Show("Jeste li sigurni da ≈æelite izbrisati ovu knjigu?",
                                          "Potvrda brisanja", MessageBoxButtons.YesNo);
            if (confirm == DialogResult.Yes)
            {
                using (SqlConnection conn = new SqlConnection(connectionString))
                {
                    string query = "DELETE FROM Knjige WHERE KnjigaID=@ID";
                    SqlCommand cmd = new SqlCommand(query, conn);
                    cmd.Parameters.AddWithValue("@ID", knjigaID);

                    conn.Open();
                    cmd.ExecuteNonQuery();
                    conn.Close();

                    MessageBox.Show("Knjiga uspje≈°no izbrisana!");
                    LoadKnjige(); // osvje≈æi prikaz
                }
            }
        }
    }
}
üéØ Rezultat
Glavna forma ostaje ƒçista ‚Äì samo otvara UredivanjeKnjiga ili BrisanjeKnjiga.

UredivanjeKnjiga ‚Üí korisnik odabere knjigu iz DataGridViewa, podaci se uƒçitaju u polja, izmijeni ih i spremi.

BrisanjeKnjiga ‚Üí korisnik odabere knjigu iz DataGridViewa i klikne Izbri≈°i.

Nema potrebe da korisnik zna ili upisuje ID knjige ruƒçno.

≈Ωeli≈° da ti dam i PregledKnjiga formu s moguƒáno≈°ƒáu pretrage i filtriranja (po autoru, naslovu, godini), da zaokru≈æimo cijeli CRUD modul?





Uredi na stranici
Rekli ste
daj ≈æelim da umjesto brisanja u bazi imamo aktivno(i za knjige i ƒçlanove) te da se postavi na 0
Copilot ka≈æe
Odliƒçno rje≈°enje üëå ‚Äì umjesto da fiziƒçki bri≈°e≈° podatke iz baze, uvodi≈° logiƒçko brisanje pomoƒáu polja Aktivan. To je puno bolje jer:

Ne gubi≈° podatke (mo≈æe≈° ih kasnije vratiti).

Ima≈° povijest svih knjiga i ƒçlanova.

Jednostavno filtrira≈° samo aktivne zapise.

üìä Promjena strukture baze
Dodaj polje Aktivan u tablice Knjige i Clanovi:

sql


Kopiraj
ALTER TABLE Knjige ADD Aktivan BIT DEFAULT 1;
ALTER TABLE Clanovi ADD Aktivan BIT DEFAULT 1;
Aktivan = 1 ‚Üí zapis je aktivan

Aktivan = 0 ‚Üí zapis je "obrisan" (ne koristi se, ali ostaje u bazi)

üì• Primjeri upita
Pregled samo aktivnih knjiga
sql


Kopiraj
SELECT * FROM Knjige WHERE Aktivan = 1;
Pregled samo aktivnih ƒçlanova
sql


Kopiraj
SELECT * FROM Clanovi WHERE Aktivan = 1;
"Brisanje" knjige (postavljanje na neaktivno)
sql


Kopiraj
UPDATE Knjige
SET Aktivan = 0
WHERE KnjigaID = @ID;
"Brisanje" ƒçlana
sql


Kopiraj
UPDATE Clanovi
SET Aktivan = 0
WHERE ClanID = @ID;
üñ•Ô∏è C# kod za logiƒçko brisanje
Forma za brisanje knjige (BrisanjeKnjiga.cs)
csharp


Kopiraj
private void btnIzbrisi_Click(object sender, EventArgs e)
{
    if (knjigaID > 0)
    {
        using (SqlConnection conn = new SqlConnection(connectionString))
        {
            string query = "UPDATE Knjige SET Aktivan = 0 WHERE KnjigaID=@ID";
            SqlCommand cmd = new SqlCommand(query, conn);
            cmd.Parameters.AddWithValue("@ID", knjigaID);

            conn.Open();
            cmd.ExecuteNonQuery();
            conn.Close();

            MessageBox.Show("Knjiga je oznaƒçena kao neaktivna!");
            LoadKnjige(); // osvje≈æi prikaz
        }
    }
}
Forma za brisanje ƒçlana (BrisanjeClanova.cs)
csharp


Kopiraj
private void btnIzbrisi_Click(object sender, EventArgs e)
{
    if (clanID > 0)
    {
        using (SqlConnection conn = new SqlConnection(connectionString))
        {
            string query = "UPDATE Clanovi SET Aktivan = 0 WHERE ClanID=@ID";
            SqlCommand cmd = new SqlCommand(query, conn);
            cmd.Parameters.AddWithValue("@ID", clanID);

            conn.Open();
            cmd.ExecuteNonQuery();
            conn.Close();

            MessageBox.Show("ƒålan je oznaƒçen kao neaktivan!");
            LoadClanovi(); // osvje≈æi prikaz
        }
    }
}
üéØ Rezultat
Brisanje vi≈°e ne bri≈°e podatke, nego ih samo oznaƒçava kao neaktivne.

U svim pregledima (PregledKnjiga, PregledClanova) prikazuje≈° samo one gdje je Aktivan = 1.

Ako ≈æeli≈°, mo≈æe≈° napraviti posebnu formu Arhiva gdje se vide i neaktivni zapisi.

üëâ Hoƒáe≈° da ti odmah dam i PregledKnjiga formu koja prikazuje samo aktivne knjige i ima opciju da se ukljuƒçi/iskljuƒçi filter (aktivne vs. sve)?





Uredi na stranici
Rekli ste
daj sada izmjeni ureƒëivanje knjiga, dodavanje knjiga i poƒçetnu da se sla≈æu s om promjenom
Copilot ka≈æe
Odliƒçno, idemo sada sve uskladiti s promjenom da brisanje nije fiziƒçko nego se radi preko polja Aktivan (1 = aktivno, 0 = neaktivno). To znaƒçi da i DodavanjeKnjiga, UredivanjeKnjiga i MainForm moraju raditi s tim poljem.

üìò Dodavanje knjige (DodavanjeKnjiga.cs)
Dodavanje knjige sada automatski postavlja Aktivan = 1.

csharp


Kopiraj
using System;
using System.Data.SqlClient;
using System.Windows.Forms;

namespace KnjiznicaApp
{
    public partial class DodavanjeKnjiga : Form
    {
        private string connectionString = "Server=localhost;Database=Knjiznica;Trusted_Connection=True;";

        public DodavanjeKnjiga()
        {
            InitializeComponent();
        }

        private void btnSpremi_Click(object sender, EventArgs e)
        {
            using (SqlConnection conn = new SqlConnection(connectionString))
            {
                string query = "INSERT INTO Knjige (Naslov, Autor, GodinaIzdavanja, ISBN, Aktivan) " +
                               "VALUES (@Naslov, @Autor, @Godina, @ISBN, 1)";

                SqlCommand cmd = new SqlCommand(query, conn);
                cmd.Parameters.AddWithValue("@Naslov", txtNaslov.Text);
                cmd.Parameters.AddWithValue("@Autor", txtAutor.Text);
                cmd.Parameters.AddWithValue("@Godina", int.Parse(txtGodina.Text));
                cmd.Parameters.AddWithValue("@ISBN", txtISBN.Text);

                conn.Open();
                cmd.ExecuteNonQuery();
                conn.Close();

                MessageBox.Show("Knjiga uspje≈°no dodana!");
                this.Close();
            }
        }
    }
}
üìó Ureƒëivanje knjige (UredivanjeKnjiga.cs)
Ureƒëivanje knjige radi samo nad aktivnim knjigama. Ako ≈æeli≈°, mo≈æe≈° dodati i opciju da se knjiga ponovno aktivira (Aktivan = 1).

csharp


Kopiraj
using System;
using System.Data.SqlClient;
using System.Windows.Forms;

namespace KnjiznicaApp
{
    public partial class UredivanjeKnjiga : Form
    {
        private string connectionString = "Server=localhost;Database=Knjiznica;Trusted_Connection=True;";
        private int knjigaID;

        public UredivanjeKnjiga()
        {
            InitializeComponent();
            LoadKnjige();
        }

        private void LoadKnjige()
        {
            using (SqlConnection conn = new SqlConnection(connectionString))
            {
                SqlDataAdapter da = new SqlDataAdapter("SELECT * FROM Knjige WHERE Aktivan = 1", conn);
                DataTable dt = new DataTable();
                da.Fill(dt);
                dgvKnjige.DataSource = dt;
            }
        }

        private void dgvKnjige_CellClick(object sender, DataGridViewCellEventArgs e)
        {
            if (e.RowIndex >= 0)
            {
                knjigaID = Convert.ToInt32(dgvKnjige.Rows[e.RowIndex].Cells["KnjigaID"].Value);
                txtNaslov.Text = dgvKnjige.Rows[e.RowIndex].Cells["Naslov"].Value.ToString();
                txtAutor.Text = dgvKnjige.Rows[e.RowIndex].Cells["Autor"].Value.ToString();
                txtGodina.Text = dgvKnjige.Rows[e.RowIndex].Cells["GodinaIzdavanja"].Value.ToString();
                txtISBN.Text = dgvKnjige.Rows[e.RowIndex].Cells["ISBN"].Value.ToString();
            }
        }

        private void btnSpremi_Click(object sender, EventArgs e)
        {
            using (SqlConnection conn = new SqlConnection(connectionString))
            {
                string query = "UPDATE Knjige SET Naslov=@Naslov, Autor=@Autor, GodinaIzdavanja=@Godina, ISBN=@ISBN WHERE KnjigaID=@ID";
                SqlCommand cmd = new SqlCommand(query, conn);
                cmd.Parameters.AddWithValue("@Naslov", txtNaslov.Text);
                cmd.Parameters.AddWithValue("@Autor", txtAutor.Text);
                cmd.Parameters.AddWithValue("@Godina", int.Parse(txtGodina.Text));
                cmd.Parameters.AddWithValue("@ISBN", txtISBN.Text);
                cmd.Parameters.AddWithValue("@ID", knjigaID);

                conn.Open();
                cmd.ExecuteNonQuery();
                conn.Close();

                MessageBox.Show("Knjiga uspje≈°no a≈æurirana!");
                LoadKnjige();
            }
        }
    }
}
üñ•Ô∏è Poƒçetna forma (MainForm.cs)
Glavna forma sada prikazuje samo aktivne knjige i ƒçlanove.
Sve metode LoadKnjige i LoadClanovi filtriraju po Aktivan = 1.

csharp


Kopiraj
private void LoadKnjige()
{
    using (SqlConnection conn = new SqlConnection(connectionString))
    {
        SqlDataAdapter da = new SqlDataAdapter("SELECT * FROM Knjige WHERE Aktivan = 1", conn);
        DataTable dt = new DataTable();
        da.Fill(dt);
        dgvKnjige.DataSource = dt;
    }
}

private void LoadClanovi()
{
    using (SqlConnection conn = new SqlConnection(connectionString))
    {
        SqlDataAdapter da = new SqlDataAdapter("SELECT * FROM Clanovi WHERE Aktivan = 1", conn);
        DataTable dt = new DataTable();
        da.Fill(dt);
        dgvClanovi.DataSource = dt;
    }
}
üéØ Rezultat
Dodavanje knjige ‚Üí automatski Aktivan = 1.

Ureƒëivanje knjige ‚Üí radi samo nad aktivnim knjigama.

Poƒçetna forma ‚Üí prikazuje samo aktivne knjige i ƒçlanove.

Brisanje knjige/ƒçlana ‚Üí samo postavlja Aktivan = 0, pa se oni vi≈°e ne prikazuju u glavnoj formi.

üëâ Hoƒáe≈° da ti napravim i PregledKnjiga formu s opcijom da se prika≈æu i neaktivne knjige (npr. checkbox "Prika≈æi arhivu")?





Uredi na stranici
Rekli ste
hm mo≈æda nisam htio contextmenustrip. Nego menu strip ako je to ono na vrhu. Daj raƒëe prilagodi sva 4 programa tome
Copilot ka≈æe
Odliƒçno, sad ƒáemo sve prilagoditi na MenuStrip ‚Äì to je onaj glavni meni na vrhu forme (File, Edit, Help‚Ä¶), puno pregledniji od ContextMenuStripa. Dakle, poƒçetna forma (MainForm) ƒáe imati MenuStrip s tri glavna izbornika: Knjige, ƒålanovi, Statistika, a tvoje forme za Dodavanje, Ureƒëivanje i Brisanje knjiga ƒáe se otvarati preko tih stavki.

üñ•Ô∏è Poƒçetna forma (MainForm.cs) s MenuStripom
csharp


Kopiraj
using System;
using System.Data;
using System.Data.SqlClient;
using System.Windows.Forms;

namespace KnjiznicaApp
{
    public partial class MainForm : Form
    {
        private string connectionString = "Server=localhost;Database=Knjiznica;Trusted_Connection=True;";

        public MainForm()
        {
            InitializeComponent();
            InitMenuStrip();
        }

        private void MainForm_Load(object sender, EventArgs e)
        {
            LoadKnjige();
            LoadClanovi();
            LoadPosudbe();
        }

        private void InitMenuStrip()
        {
            MenuStrip menuStrip = new MenuStrip();

            // --- KNJIGE ---
            ToolStripMenuItem knjigeMenu = new ToolStripMenuItem("Knjige");
            knjigeMenu.DropDownItems.Add("Posudi knjigu", null, PosudiKnjigu_Click);
            knjigeMenu.DropDownItems.Add("Povrat knjige", null, VratiKnjigu_Click);
            knjigeMenu.DropDownItems.Add("Pregledaj knjige", null, PregledajKnjige_Click);
            knjigeMenu.DropDownItems.Add("Dodaj knjigu", null, DodajKnjigu_Click);
            knjigeMenu.DropDownItems.Add("Uredi knjigu", null, UrediKnjigu_Click);
            knjigeMenu.DropDownItems.Add("Izbri≈°i knjigu", null, IzbrisiKnjigu_Click);

            // --- ƒåLANOVI ---
            ToolStripMenuItem clanoviMenu = new ToolStripMenuItem("ƒålanovi");
            clanoviMenu.DropDownItems.Add("Pregled ƒçlanova", null, PregledajClanove_Click);
            clanoviMenu.DropDownItems.Add("Dodaj ƒçlana", null, DodajClana_Click);
            clanoviMenu.DropDownItems.Add("Uredi ƒçlana", null, UrediClana_Click);
            clanoviMenu.DropDownItems.Add("Izbri≈°i ƒçlana", null, IzbrisiClana_Click);

            // --- STATISTIKA ---
            ToolStripMenuItem statistikaMenu = new ToolStripMenuItem("Statistika");
            // zasad prazno

            // Dodaj sve u meni
            menuStrip.Items.Add(knjigeMenu);
            menuStrip.Items.Add(clanoviMenu);
            menuStrip.Items.Add(statistikaMenu);

            // Dodaj MenuStrip na formu
            this.MainMenuStrip = menuStrip;
            this.Controls.Add(menuStrip);
        }

        // üîπ Event handleri
        private void PosudiKnjigu_Click(object sender, EventArgs e) => new PosudbaKnjiga().ShowDialog();
        private void VratiKnjigu_Click(object sender, EventArgs e) => new PovratKnjiga().ShowDialog();
        private void PregledajKnjige_Click(object sender, EventArgs e) => new PregledKnjiga().ShowDialog();
        private void DodajKnjigu_Click(object sender, EventArgs e) => new DodavanjeKnjiga().ShowDialog();
        private void UrediKnjigu_Click(object sender, EventArgs e) => new UredivanjeKnjiga().ShowDialog();
        private void IzbrisiKnjigu_Click(object sender, EventArgs e) => new BrisanjeKnjiga().ShowDialog();

        private void PregledajClanove_Click(object sender, EventArgs e) => new PregledClanova().ShowDialog();
        private void DodajClana_Click(object sender, EventArgs e) => new DodavanjeClanova().ShowDialog();
        private void UrediClana_Click(object sender, EventArgs e) => new UredivanjeClanova().ShowDialog();
        private void IzbrisiClana_Click(object sender, EventArgs e) => new BrisanjeClanova().ShowDialog();

        // üîπ Pregledi (samo aktivni zapisi)
        private void LoadKnjige()
        {
            using (SqlConnection conn = new SqlConnection(connectionString))
            {
                SqlDataAdapter da = new SqlDataAdapter("SELECT * FROM Knjige WHERE Aktivan = 1", conn);
                DataTable dt = new DataTable();
                da.Fill(dt);
                dgvKnjige.DataSource = dt;
            }
        }

        private void LoadClanovi()
        {
            using (SqlConnection conn = new SqlConnection(connectionString))
            {
                SqlDataAdapter da = new SqlDataAdapter("SELECT * FROM Clanovi WHERE Aktivan = 1", conn);
                DataTable dt = new DataTable();
                da.Fill(dt);
                dgvClanovi.DataSource = dt;
            }
        }

        private void LoadPosudbe()
        {
            using (SqlConnection conn = new SqlConnection(connectionString))
            {
                string query = @"SELECT p.PosudbaID, c.Ime, c.Prezime, k.Naslov, 
                                        p.DatumPosudbe, p.DatumPovratka, p.Vracena
                                 FROM Posudbe p
                                 JOIN Clanovi c ON p.ClanID = c.ClanID
                                 JOIN Knjige k ON p.KnjigaID = k.KnjigaID
                                 WHERE k.Aktivan = 1 AND c.Aktivan = 1";

                SqlDataAdapter da = new SqlDataAdapter(query, conn);
                DataTable dt = new DataTable();
                da.Fill(dt);
                dgvPosudbe.DataSource = dt;
            }
        }
    }
}
üìò Dodavanje knjige (DodavanjeKnjiga.cs)
csharp


Kopiraj
string query = "INSERT INTO Knjige (Naslov, Autor, GodinaIzdavanja, ISBN, Aktivan) " +
               "VALUES (@Naslov, @Autor, @Godina, @ISBN, 1)";
üìó Ureƒëivanje knjige (UredivanjeKnjiga.cs)
Uƒçitava samo aktivne knjige (WHERE Aktivan = 1).

Omoguƒáava izmjenu podataka.

üìï Brisanje knjige (BrisanjeKnjiga.cs)
Umjesto DELETE, koristi:

csharp


Kopiraj
string query = "UPDATE Knjige SET Aktivan = 0 WHERE KnjigaID=@ID";
üéØ Rezultat
MenuStrip na vrhu forme je glavna navigacija.

Dodavanje, Ureƒëivanje, Brisanje knjiga rade s poljem Aktivan.

Glavna forma prikazuje samo aktivne zapise.

Brisanje je logiƒçko (Aktivan = 0), a ne fiziƒçko.

üëâ ≈Ωeli≈° da ti dam i MenuStrip dizajn za ƒçlanove (Dodavanje, Ureƒëivanje, Brisanje ƒçlanova) u istom stilu, da sve bude potpuno paralelno?





Uredi na stranici
Rekli ste
dobro sljedeƒáe daj da mogu pretra≈æiti knjigu. u brisanje u ureƒëivanje i to po naslovu
Copilot ka≈æe
Odliƒçno, idemo sada dodati pretragu po naslovu u forme za Ureƒëivanje i Brisanje knjiga. To znaƒçi da korisnik neƒáe morati klikati na red u DataGridViewu, nego mo≈æe upisati dio naslova i filtrirati rezultate.

üìó Ureƒëivanje knjige (UredivanjeKnjiga.cs)
Dodaj TextBox (txtPretraga) i gumb Pretra≈æi (btnPretrazi).
Korisnik upi≈°e naslov ili dio naslova ‚Üí filtrira se DataGridView.

csharp


Kopiraj
using System;
using System.Data;
using System.Data.SqlClient;
using System.Windows.Forms;

namespace KnjiznicaApp
{
    public partial class UredivanjeKnjiga : Form
    {
        private string connectionString = "Server=localhost;Database=Knjiznica;Trusted_Connection=True;";
        private int knjigaID;

        public UredivanjeKnjiga()
        {
            InitializeComponent();
            LoadKnjige();
        }

        private void LoadKnjige(string filter = "")
        {
            using (SqlConnection conn = new SqlConnection(connectionString))
            {
                string query = "SELECT * FROM Knjige WHERE Aktivan = 1";

                if (!string.IsNullOrEmpty(filter))
                    query += " AND Naslov LIKE @Filter";

                SqlDataAdapter da = new SqlDataAdapter(query, conn);

                if (!string.IsNullOrEmpty(filter))
                    da.SelectCommand.Parameters.AddWithValue("@Filter", "%" + filter + "%");

                DataTable dt = new DataTable();
                da.Fill(dt);
                dgvKnjige.DataSource = dt;
            }
        }

        private void btnPretrazi_Click(object sender, EventArgs e)
        {
            LoadKnjige(txtPretraga.Text);
        }

        private void dgvKnjige_CellClick(object sender, DataGridViewCellEventArgs e)
        {
            if (e.RowIndex >= 0)
            {
                knjigaID = Convert.ToInt32(dgvKnjige.Rows[e.RowIndex].Cells["KnjigaID"].Value);
                txtNaslov.Text = dgvKnjige.Rows[e.RowIndex].Cells["Naslov"].Value.ToString();
                txtAutor.Text = dgvKnjige.Rows[e.RowIndex].Cells["Autor"].Value.ToString();
                txtGodina.Text = dgvKnjige.Rows[e.RowIndex].Cells["GodinaIzdavanja"].Value.ToString();
                txtISBN.Text = dgvKnjige.Rows[e.RowIndex].Cells["ISBN"].Value.ToString();
            }
        }

        private void btnSpremi_Click(object sender, EventArgs e)
        {
            using (SqlConnection conn = new SqlConnection(connectionString))
            {
                string query = "UPDATE Knjige SET Naslov=@Naslov, Autor=@Autor, GodinaIzdavanja=@Godina, ISBN=@ISBN WHERE KnjigaID=@ID";
                SqlCommand cmd = new SqlCommand(query, conn);
                cmd.Parameters.AddWithValue("@Naslov", txtNaslov.Text);
                cmd.Parameters.AddWithValue("@Autor", txtAutor.Text);
                cmd.Parameters.AddWithValue("@Godina", int.Parse(txtGodina.Text));
                cmd.Parameters.AddWithValue("@ISBN", txtISBN.Text);
                cmd.Parameters.AddWithValue("@ID", knjigaID);

                conn.Open();
                cmd.ExecuteNonQuery();
                conn.Close();

                MessageBox.Show("Knjiga uspje≈°no a≈æurirana!");
                LoadKnjige();
            }
        }
    }
}
üìï Brisanje knjige (BrisanjeKnjiga.cs)
Dodaj TextBox (txtPretraga) i gumb Pretra≈æi (btnPretrazi).
Korisnik upi≈°e naslov ‚Üí filtrira se DataGridView.

csharp


Kopiraj
using System;
using System.Data;
using System.Data.SqlClient;
using System.Windows.Forms;

namespace KnjiznicaApp
{
    public partial class BrisanjeKnjiga : Form
    {
        private string connectionString = "Server=localhost;Database=Knjiznica;Trusted_Connection=True;";
        private int knjigaID;

        public BrisanjeKnjiga()
        {
            InitializeComponent();
            LoadKnjige();
        }

        private void LoadKnjige(string filter = "")
        {
            using (SqlConnection conn = new SqlConnection(connectionString))
            {
                string query = "SELECT * FROM Knjige WHERE Aktivan = 1";

                if (!string.IsNullOrEmpty(filter))
                    query += " AND Naslov LIKE @Filter";

                SqlDataAdapter da = new SqlDataAdapter(query, conn);

                if (!string.IsNullOrEmpty(filter))
                    da.SelectCommand.Parameters.AddWithValue("@Filter", "%" + filter + "%");

                DataTable dt = new DataTable();
                da.Fill(dt);
                dgvKnjige.DataSource = dt;
            }
        }

        private void btnPretrazi_Click(object sender, EventArgs e)
        {
            LoadKnjige(txtPretraga.Text);
        }

        private void dgvKnjige_CellClick(object sender, DataGridViewCellEventArgs e)
        {
            if (e.RowIndex >= 0)
            {
                knjigaID = Convert.ToInt32(dgvKnjige.Rows[e.RowIndex].Cells["KnjigaID"].Value);
            }
        }

        private void btnIzbrisi_Click(object sender, EventArgs e)
        {
            if (knjigaID > 0)
            {
                var confirm = MessageBox.Show("Jeste li sigurni da ≈æelite oznaƒçiti knjigu kao neaktivnu?",
                                              "Potvrda brisanja", MessageBoxButtons.YesNo);
                if (confirm == DialogResult.Yes)
                {
                    using (SqlConnection conn = new SqlConnection(connectionString))
                    {
                        string query = "UPDATE Knjige SET Aktivan = 0 WHERE KnjigaID=@ID";
                        SqlCommand cmd = new SqlCommand(query, conn);
                        cmd.Parameters.AddWithValue("@ID", knjigaID);

                        conn.Open();
                        cmd.ExecuteNonQuery();
                        conn.Close();

                        MessageBox.Show("Knjiga je oznaƒçena kao neaktivna!");
                        LoadKnjige();
                    }
                }
            }
        }
    }
}
üéØ Rezultat
U formama za Ureƒëivanje i Brisanje knjiga dodan je TextBox za pretragu po naslovu.

Korisnik mo≈æe upisati dio naslova i kliknuti Pretra≈æi ‚Üí filtrira se DataGridView.

Nakon odabira knjige iz rezultata, mo≈æe je urediti ili oznaƒçiti kao neaktivnu.

üëâ ≈Ωeli≈° da ti odmah dam i isti princip za ƒçlanove (pretraga po imenu/prezimenu u formama za ureƒëivanje i brisanje ƒçlanova)?






Uredi na stranici

dodaj 










