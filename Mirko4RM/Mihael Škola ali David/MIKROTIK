input, outputm forward
icmp za ping

system/reset-configuration no-defaults=yes
interface/print
ip/address/add address=192.168.1.10/24 interface=ether1
ip/route/add gateway=192.168.1.1  dst-address=0.0.0.0/0
ping 192.168.2.10

ip/firewall/filter/add chain=forward action=log protocol=icmp
ip/firewall/filter/ print detail stats
log print
ip/firewall/filter/add chain=forward action=drop protocol=icmp

ip/service/print
/tool/fetch url=google.com mode=http address=192.168.2.10
ip/firewall/filter/add chain=forward action=log protocol=tcp




lijevi nemo≈æe pristupiti desnome desni mo≈æe lijevome ---> by murk
ip firewall filter add action=drop protocol=tcp chain=forward dst-port=80 dst-address=192.168.2.10 src-address=192.168.1.10


export
ip dhcp-client/print
ip dhcp-client/add interface=ether1
unutarnjamre≈æa ne briged
ip pool/add name=nest ranges=192.168.100.100-192.168.100.150
ip dhcp-server/network/add address=192.168.100.0/24 netmask=24 dns-server=1.1.1.1 gateway=192.168.100.254 
ip dhcp-server/add name=LAN1 lease-time=00:05:00 address-pool=nest interface=ether1
ip/dhcp-server/lease/print
ip/dhcp-client/print detail
ip/dhcp-server/lease/add address=192.168.100.140 mac-address=00:34:33:44:33 server=LAN

192.168.x.0/24-----r1---------t≈°ƒç switch (premo≈°ƒçeni adapter)

192.168.10.1

renew-bound-search
rebinding-renewing-searching-stopped
na pola vremena ide van iz bound.onda renewing
na 30sec rebinding(multicast)
koristi unicast za produljivanje

ip/firewall/filter/add action=add-src-to-address-list chain=input address-list=neWEB protocol=icmp address-list-timeout=1m
ip/firewall/filter/add action=add-src-to-address-list chain=input address-list=neTCP protocol=tcp address-list-timeout=5m port=80

ppp profile add name=pptp-profile local-address=10.10.10.1 remote-address=10.10.10.2 use-encryption=yes        <-remote address mo≈æe biti pool
/interface pptp-server server set enabled=yes default-profile=pptp-profile
/ppp secret add name=vpn1 password=1234 service=pptp profile=pptp-profile
/ip route add dst-address=192.168.100.0/24 gateway=10.10.10.2

/interface pptp-client add name=pptp-to-R3 \ connect-to=192.168.0.5 \ user=vpn1 \ password=1234 \profile=default-encryption \ disabled=no
/ip route add dst-address=192.168.200.0/24 gateway=pptp-to-R3

ip/firewall/nat/add chain=srcnat out-interface=ether2 action=masquarade


PROXY KOMANDE  
https://help.mikrotik.com/docs/spaces/ROS/pages/132350000/Proxy


/system ntp server set enabled=yes
/system ntp client set enabled=yes primary-ntp=192.168.1.1         <-MIKROTIK VERZIJA 7
/system clock set time=10:30:00
/system clock print
/system ntp client set enabled=no












CA cert
Name: ca-cert
Common Name: ca
Key Size: 4096
Days Valid: 3650
Key Usage: key-cert-sign, crl-sign


‚Üí Sign

2Ô∏è‚É£ Server cert
Name: server-cert
Common Name: vpn.tvojddns.net   (ILI javna IP)
Key Usage: digital-signature, key-encipherment, tls-server


‚Üí Sign
‚Üí CA: ca-cert

3Ô∏è‚É£ Export CA cert (za mobitel)

Select ca-cert

Export

Bez passworda (ili zapamti)

Prebaci .crt na mobitel

üßæ KORAK 2 ‚Äì IP Pool
IP ‚Üí Pool
Name: ikev2-pool
Ranges: 10.10.10.10-10.10.10.50

üë§ KORAK 3 ‚Äì User
PPP ‚Üí Secrets
Name: vpnuser
Password: JAKAPASSWORD
Service: ike2

üîê KORAK 4 ‚Äì IPsec konfiguracija
Proposal
IP ‚Üí IPsec ‚Üí Proposals
Auth Algorithms: sha256
Enc Algorithms: aes-256-cbc
PFS Group: none

Mode Config
IP ‚Üí IPsec ‚Üí Mode Config
Name: ikev2-conf
Address Pool: ikev2-pool
Split DNS: 0.0.0.0

Profile
IP ‚Üí IPsec ‚Üí Profiles
Name: ikev2-profile
Hash Algorithms: sha256
Enc Algorithms: aes-256
DH Group: modp2048

Peer
IP ‚Üí IPsec ‚Üí Peers
Exchange Mode: ike2
Profile: ikev2-profile
Passive: yes

Identity
IP ‚Üí IPsec ‚Üí Identities
Auth Method: digital signature
Certificate: server-cert
Remote Certificate: none
Mode Config: ikev2-conf
Generate Policy: port-strict
Username: vpnuser
Password: MOJPASSWORDZNBA≈†VEƒÜDAVID

üî• KORAK 5 ‚Äì Firewall (OBAVEZNO)
IP ‚Üí Firewall ‚Üí Filter Rules

ACCEPT UDP 500,4500
ACCEPT protocol ipsec-esp


I NAT:

IP ‚Üí Firewall ‚Üí NAT
Chain: srcnat
Src Address: 10.10.10.0/24
Action: masquerade

üì± KORAK 6 ‚Äì Mobitel

Instaliraj CA cert

VPN type: IKEv2

Server: vpn.tvojddns.net

Username / Password

Auth: Certificate

‚Üí Connect ‚úÖ

























